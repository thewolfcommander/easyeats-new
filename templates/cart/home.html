{% extends 'base.html' %}

{% load static %}

{% block title %}Cart Home{% endblock title %}
{% block description %}{% endblock description %}
{% block authors %}{% endblock authors %}
{% block keywords %}{% endblock keywords %}
{% block styles %}
<style>

</style>
{% endblock styles %}

{% block content %}

<div class="container">
    <div class="row">
        <div class="col-md-12 mt-4 pt-4">
            <h4 class="display-4" style="color: var(--main);">Your Cart</h4>
            {% if cart %}
            <div class="table-responsive-md">
                <table class="table">
                    <thead class="" style="background: var(--main)!important; color: #fff;">
                        <tr>
                            <th scope="col" class="col-md-2" style="min-width: 120px!important;">Item Thumbnail</th>
                            <th scope="col" class="col-md-1">Quantity</th>
                            <th scope="col" class="col-md-7" style="min-width: 450px!important;">Item Name</th>
                            <th scope="col" class="col-md-2 col-sm-12" >Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in cart.foods.all %}
                        <tr>
                            <th scope="row"><img src="{% if item.foodimage_set.first.image %}{{ item.foodimage_set.first.image.url }}{% else %}https://images.pexels.com/photos/1095550/pexels-photo-1095550.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940{% endif %}" alt="{{ item.name }}"
                                    width="90px"></th>
                            <th>1</th>
                            <td><a href="{% url 'products:food_detail' item.id %}">
                                    <p class="lead"><strong>{{ item.name }}</strong></p>
                                </a>
                                <small>{{ item.summary }}</small><br>
                                {% include 'products/snippets/update-cart.html' with cart=cart food=item %}
                            </td>
                            <td>Rs. {{ item.discount_price }}</td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <th></th>
                            <th></th>
                            <th>Sub Total</th>
                            <th>{{ cart.sub_total }}</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th></th>
                            <th>Discount (If Any)</th>
                            <th>0.00</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th></th>
                            <th>Shipping Charges</th>
                            <th>{{ cart.shipping }}</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th></th>
                            <th>Total</th>
                            <th>{{ cart.total }}</th>
                        </tr>
                    </tbody>
                </table>
                {% if cart.foods.count != 0 %}
                {% if request.user.is_authenticated %}
                <a href="{% url 'addresses:select' %}" class="button m-4" style="float: right!important;">Continue</a>
                {% else %}
                <a href="{% url 'accounts:login' %}?next={{ request.get_full_path|urlencode }}" class="button m-4" style="float: right!important;">Login to Continue</a>
                <p class="lead" style="float: right!important;">Not registered yet?</p>
                <a href="{% url 'accounts:signup' %}?next={{ request.get_full_path|urlencode }}" class="button m-4" style="float: right!important;">Register to Continue</a>
                {% endif %}
                {% endif %}
            </div>
            {% else %}
            <p class="lead">Ohhhh It seams your cart is feeling hungry !!!</p>
            <a href="{% url 'core:home' %}" class="button">Feed it now</a>
            {% endif %}
        </div>
    </div>
</div>

{% endblock content %}

{% block scripts %}
{% endblock scripts %}